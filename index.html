<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Game Company Tycoon â€“ Firebase Edition</title>
  <!-- Tailwind CDN for quick beautiful UI -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { height: 100%; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,.7); }
    .mono { font-variant-numeric: tabular-nums; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-indigo-900 to-purple-900 text-slate-100">
  <div class="max-w-6xl mx-auto p-4 md:p-8">
    <header class="flex items-center justify-between mb-6">
      <h1 class="text-2xl md:text-3xl font-extrabold">ğŸ® Game Company Tycoon <span class="opacity-70 text-sm">(Firebase)</span></h1>
      <div id="auth-area" class="flex gap-2"></div>
    </header>

    <!-- Status / Alerts -->
    <div id="alert" class="hidden mb-4 p-3 rounded-xl bg-red-600/20 border border-red-400 text-red-100"></div>

    <!-- Intro / Sign-in card -->
    <section id="signin-card" class="glass rounded-2xl border border-white/20 shadow-xl p-6 mb-6">
      <h2 class="text-xl font-bold mb-2">ã¯ã˜ã‚ã‚ˆã†</h2>
      <p class="opacity-80 mb-4">Googleã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã€ã‚ãªãŸã®ã‚²ãƒ¼ãƒ ä¼šç¤¾ã‚’ç«‹ã¡ä¸Šã’ã¾ã—ã‚‡ã†ã€‚</p>
      <div class="flex gap-3">
        <button id="btn-google" class="px-4 py-2 rounded-xl bg-white text-slate-900 font-semibold shadow hover:opacity-90">Googleã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³</button>
      </div>
    </section>

    <!-- Main game area -->
    <section id="game" class="hidden grid md:grid-cols-3 gap-6">
      <!-- Company Panel -->
      <div class="md:col-span-2 space-y-6">
        <div class="glass rounded-2xl border border-white/20 p-6">
          <div class="flex items-center justify-between mb-4">
            <div>
              <h3 class="text-lg font-bold">ä¼šç¤¾æƒ…å ±</h3>
              <p id="player-name" class="text-sm opacity-80"></p>
            </div>
            <span id="tick-indicator" class="text-xs opacity-70">tick: â€”</span>
          </div>

          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="p-4 rounded-xl bg-slate-900/40 border border-white/10">
              <div class="text-xs opacity-70">è³‡é‡‘</div>
              <div id="money" class="text-2xl mono">â€”</div>
            </div>
            <div class="p-4 rounded-xl bg-slate-900/40 border border-white/10">
              <div class="text-xs opacity-70">ãƒ•ã‚¡ãƒ³</div>
              <div id="fans" class="text-2xl mono">â€”</div>
            </div>
            <div class="p-4 rounded-xl bg-slate-900/40 border border-white/10">
              <div class="text-xs opacity-70">è©•åˆ¤</div>
              <div id="rep" class="text-2xl mono">â€”</div>
            </div>
            <div class="p-4 rounded-xl bg-slate-900/40 border border-white/10">
              <div class="text-xs opacity-70">å¾“æ¥­å“¡</div>
              <div id="emps" class="text-2xl mono">â€”</div>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="glass rounded-2xl border border-white/20 p-6">
          <h3 class="text-lg font-bold mb-4">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <button id="act-hire" class="w-full p-3 rounded-xl bg-emerald-500/90 hover:bg-emerald-400 text-slate-900 font-bold">é–‹ç™ºè€…ã‚’æ¡ç”¨ (Â¥50,000)</button>
            <button id="act-train" class="w-full p-3 rounded-xl bg-cyan-400/90 hover:bg-cyan-300 text-slate-900 font-bold">ç¤¾å†…ç ”ä¿® (è©•åˆ¤+1 / Â¥10,000)</button>
            <button id="act-start-proj" class="w-full p-3 rounded-xl bg-indigo-400/90 hover:bg-indigo-300 text-slate-900 font-bold">æ–°ä½œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹ (Â¥100,000)</button>
            <button id="act-sprint" class="w-full p-3 rounded-xl bg-yellow-300/90 hover:bg-yellow-200 text-slate-900 font-bold">ã‚¹ãƒ—ãƒªãƒ³ãƒˆ (é€²æ—+ã€ãƒã‚°Â±)</button>
            <button id="act-release" class="w-full p-3 rounded-xl bg-pink-400/90 hover:bg-pink-300 text-slate-900 font-bold">ãƒªãƒªãƒ¼ã‚¹ (å£²ä¸Šç™ºç”Ÿ)</button>
            <button id="act-marketing" class="w-full p-3 rounded-xl bg-fuchsia-400/90 hover:bg-fuchsia-300 text-slate-900 font-bold">ãƒãƒ¼ã‚± (ãƒ•ã‚¡ãƒ³+ / Â¥30,000)</button>
          </div>
          <p class="text-xs opacity-70 mt-3">â€» ãƒãƒ¼ãƒˆå¯¾ç­–: å¢—åŠ é¡ã«åˆ¶é™ãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§ä¿è­·</p>
        </div>

        <!-- Projects -->
        <div class="glass rounded-2xl border border-white/20 p-6">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-bold">é€²è¡Œä¸­ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h3>
            <span id="proj-count" class="text-sm opacity-70">â€”</span>
          </div>
          <div id="projects" class="mt-3 grid gap-3"></div>
        </div>

        <!-- Released Games -->
        <div class="glass rounded-2xl border border-white/20 p-6">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-bold">ãƒªãƒªãƒ¼ã‚¹æ¸ˆã¿ã‚¿ã‚¤ãƒˆãƒ«</h3>
            <span id="rel-count" class="text-sm opacity-70">â€”</span>
          </div>
          <div id="released" class="mt-3 grid gap-3"></div>
        </div>
      </div>

      <!-- Leaderboard & Admin -->
      <aside class="space-y-6">
        <div class="glass rounded-2xl border border-white/20 p-6">
          <h3 class="text-lg font-bold mb-4">ãƒ©ãƒ³ã‚­ãƒ³ã‚° (ä¸Šä½20)</h3>
          <ol id="leaderboard" class="space-y-2 text-sm"></ol>
        </div>

        <div id="admin-panel" class="hidden glass rounded-2xl border border-rose-300/40 p-6">
          <h3 class="text-lg font-bold mb-2">ç®¡ç† (Ban)</h3>
          <p class="text-xs opacity-80 mb-3">UIDã‚’å…¥åŠ›ã—ã¦Banã€‚å–ã‚Šæ¶ˆã—ã¯ Firestore ã§å‰Šé™¤ã€‚</p>
          <input id="ban-uid" class="w-full p-2 rounded-lg text-slate-900" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼UID" />
          <input id="ban-reason" class="w-full p-2 rounded-lg text-slate-900 mt-2" placeholder="ç†ç”± (ä¾‹: ãƒãƒ¼ãƒˆè¡Œç‚º)" />
          <button id="btn-ban" class="mt-3 w-full p-2 rounded-xl bg-red-500 hover:bg-red-400 font-bold text-white">Banã™ã‚‹</button>
        </div>

        <div class="glass rounded-2xl border border-white/20 p-6 text-xs leading-relaxed">
          <h4 class="font-bold mb-2">ä½¿ã„æ–¹</h4>
          <ul class="list-disc ml-5 space-y-1 opacity-90">
            <li>æ¡ç”¨ã§äººã‚’å¢—ã‚„ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã—ã¦ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚’å›ãã†ã€‚</li>
            <li>ååˆ†ã«é€²æ—ãŒæºœã¾ã£ãŸã‚‰ãƒªãƒªãƒ¼ã‚¹ã€‚ãƒ•ã‚¡ãƒ³ãŒå¢—ãˆã‚‹ã¨å£²ä¸ŠãŒä¸ŠãŒã‚‹ã€‚</li>
            <li>çµ¦ä¸ã‚„ãƒãƒ¼ã‚±è²»ç”¨ãŒæ¯tickã§å·®ã—å¼•ã‹ã‚Œã‚‹ã®ã§è³‡é‡‘ã«æ³¨æ„ï¼</li>
          </ul>
        </div>

        <!-- Firestore Rules snippet (copy-paste) -->
        <div class="glass rounded-2xl border border-white/20 p-6 text-[11px]">
          <h4 class="font-bold mb-2">Firestore ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ« (æŠœç²‹)</h4>
<pre class="whitespace-pre-wrap">
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    function isSignedIn() { return request.auth != null; }
    function isSelf(uid) { return request.auth != null && request.auth.uid == uid; }
    function maxDeltaMoney(old, neu) {
      // 1å›ã®æ›¸ãè¾¼ã¿ã§å¢—ã‚„ã›ã‚‹è³‡é‡‘ã¯æœ€å¤§ 150,000
      return (neu.money - old.money) <= 150000;
    }

    match /users/{uid} {
      allow read: if isSignedIn();
      allow create: if isSelf(uid);
      allow update: if isSelf(uid) && maxDeltaMoney(resource.data, request.resource.data)
                    && request.time > resource.data.lastWriteTime
                    && request.resource.data.lastWriteTime == request.time;
    }

    match /leaderboard/{uid} {
      allow read: if true;
      allow write: if isSelf(uid) && request.resource.data.money <= get(/databases/$(database)/documents/users/$(uid)).data.money;
    }

    match /bannedUsers/{uid} {
      allow read: if isSignedIn();
      // æ›¸ãè¾¼ã¿ã¯ç®¡ç†è€…ã®ã¿: ç®¡ç†è€…UIDã‚’å›ºå®šãƒªã‚¹ãƒˆã§
      allow write: if request.auth.uid in ['YOUR_ADMIN_UID'];
    }
  }
}
</pre>
          <p class="opacity-70 mt-2">â€» <code>YOUR_ADMIN_UID</code> ã‚’å®Ÿéš›ã®ç®¡ç†è€…UIDã«å¤‰æ›´ã€‚</p>
        </div>
      </aside>
    </section>

    <footer class="mt-10 text-center opacity-70 text-xs">
      <p>Â© 2025 Game Company Tycoon. Firebase + GitHub Pages ãƒ‡ãƒ¢ã€‚</p>
    </footer>
  </div>

  <!-- Firebase SDKs -->
  <script type="module">
    // ===============================
    //  Firebase Setup
    // ===============================
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc, serverTimestamp, onSnapshot, collection, query, orderBy, limit, runTransaction } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

    // TODO: ã“ã“ã‚’ã‚ãªãŸã®Firebaseè¨­å®šã«ç½®ãæ›ãˆ
    const firebaseConfig = {
      apiKey: "AIzaSyCvvZE5gwQ3iqPS_NjLC2k8Iut94Vv35nk",
      authDomain: "game-company-a9b66.firebaseapp.com",
      projectId: "game-company-a9b66",
      storageBucket: "game-company-a9b66.firebasestorage.app",
      messagingSenderId: "631958708137",
      appId: "1:631958708137:web:fec012e79b6152753b6eb8"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // UI refs
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
    const authArea = $("#auth-area");
    const signinCard = $("#signin-card");
    const game = $("#game");
    const alertBox = $("#alert");

    const ui = {
      name: $("#player-name"), money: $("#money"), fans: $("#fans"), rep: $("#rep"), emps: $("#emps"),
      projects: $("#projects"), projCount: $("#proj-count"), released: $("#released"), relCount: $("#rel-count"),
      leaderboard: $("#leaderboard"), tick: $("#tick-indicator"), admin: $("#admin-panel")
    };

    const ADMINS = ["YOUR_ADMIN_UID"]; // ç®¡ç†è€…UIDï¼ˆè¤‡æ•°å¯ï¼‰

    // Helpers
    function yen(n){ return `Â¥${Math.floor(n).toLocaleString()}`; }
    function showAlert(msg){ alertBox.textContent = msg; alertBox.classList.remove('hidden'); }
    function clearAlert(){ alertBox.classList.add('hidden'); }

    // ============ Auth ============
    const provider = new GoogleAuthProvider();
    $("#btn-google").addEventListener("click", async () => {
      try {
        await signInWithPopup(auth, provider);
      } catch (e) {
        showAlert("ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: " + e.message);
      }
    });

    function renderSignedOut(){
      signinCard.classList.remove('hidden');
      game.classList.add('hidden');
      authArea.innerHTML = '';
    }

    function renderSignedIn(user){
      signinCard.classList.add('hidden');
      game.classList.remove('hidden');
      authArea.innerHTML = `
        <div class="text-sm mr-2">${user.displayName || 'Player'}</div>
        <button id="btn-logout" class="px-3 py-1 rounded-lg bg-white text-slate-900 font-semibold">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>`;
      $("#btn-logout").addEventListener('click', () => signOut(auth));
    }

    // åˆæœŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
    function initialUser(uid, user){
      return {
        name: user.displayName || 'Player',
        money: 300000, // åˆæœŸè³‡é‡‘ 30ä¸‡
        fans: 0,
        reputation: 1,
        employees: 1,
        projects: [], // { id, name, progress, bugs, quality }
        released: [], // { id, name, quality, fansGain, baseRevenue }
        lastWriteTime: new Date(0),
        updatedAt: serverTimestamp()
      };
    }

    async function ensureUserDoc(uid, user){
      const uref = doc(db, 'users', uid);
      const snap = await getDoc(uref);
      if (!snap.exists()) {
        await setDoc(uref, initialUser(uid, user));
      }
    }

    // Banãƒã‚§ãƒƒã‚¯
    async function checkBan(uid){
      const bref = doc(db, 'bannedUsers', uid);
      const bsnap = await getDoc(bref);
      if (bsnap.exists()) throw new Error('ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯BANã•ã‚Œã¦ã„ã¾ã™: ' + (bsnap.data().reason || 'ç†ç”±ä¸æ˜'));
    }

    onAuthStateChanged(auth, async (user) => {
      clearAlert();
      if (!user) return renderSignedOut();
      try {
        await checkBan(user.uid);
        await ensureUserDoc(user.uid, user);
        renderSignedIn(user);
        ui.name.textContent = user.displayName || 'Player';
        ui.admin.classList.toggle('hidden', !ADMINS.includes(user.uid));
        listenUser(user.uid);
        listenLeaderboard();
        bindAdmin(user.uid);
      } catch(e){
        showAlert(e.message);
        await signOut(auth);
      }
    });

    // ============ Game Logic ============
    const COST = { hire: 50000, train: 10000, project: 100000, marketing: 30000 };
    const LIMITS = { deltaMoneyPerWrite: 150000 };

    function randomName(){
      const a = ['Super','Mega','Ultra','Hyper','Neo','Quantum','Pixel','Retro','Cyber','Myth'];
      const b = ['Quest','Runner','Tycoon','Saga',' Odyssey',' Legends',' Maker',' Arena',' Raid',' Factory'];
      return a[Math.floor(Math.random()*a.length)] + b[Math.floor(Math.random()*b.length)];
    }

    function capDelta(oldMoney, newMoney){
      return Math.min(newMoney, oldMoney + LIMITS.deltaMoneyPerWrite);
    }

    async function txUpdate(uid, mutator){
      const uref = doc(db, 'users', uid);
      await runTransaction(db, async (tx) => {
        const snap = await tx.get(uref);
        const data = snap.data();
        const next = JSON.parse(JSON.stringify(data));
        mutator(next);
        // Anti-cheat: cap money increase per write & monotonic lastWriteTime
        next.money = capDelta(data.money, next.money);
        next.lastWriteTime = new Date();
        tx.update(uref, next);
      });
      // ã‚¹ã‚³ã‚¢åæ˜ 
      const usnap = await getDoc(doc(db, 'users', uid));
      const u = usnap.data();
      await setDoc(doc(db, 'leaderboard', uid), { name: u.name, money: u.money }, { merge: true });
    }

    function renderUser(u){
      ui.money.textContent = yen(u.money);
      ui.fans.textContent = u.fans.toLocaleString();
      ui.rep.textContent = u.reputation;
      ui.emps.textContent = u.employees;

      ui.projects.innerHTML = '';
      (u.projects||[]).forEach(p => {
        const el = document.createElement('div');
        el.className = 'p-3 rounded-xl bg-slate-900/40 border border-white/10';
        el.innerHTML = `<div class="flex items-center justify-between">
          <div class="font-semibold">${p.name}</div>
          <div class="text-xs opacity-70">é€²æ— ${p.progress}% / ãƒã‚° ${p.bugs}</div>
        </div>
        <div class="w-full bg-white/10 rounded h-2 mt-2"><div class="h-2 rounded bg-white/60" style="width:${p.progress}%"></div></div>`;
        ui.projects.appendChild(el);
      });
      ui.projCount.textContent = `${(u.projects||[]).length}ä»¶`;

      ui.released.innerHTML = '';
      (u.released||[]).slice(-8).reverse().forEach(g => {
        const el = document.createElement('div');
        el.className = 'p-3 rounded-xl bg-slate-900/40 border border-white/10';
        el.innerHTML = `<div class="flex items-center justify-between">
          <div class="font-semibold">${g.name}</div>
          <div class="text-xs opacity-70">å“è³ª ${g.quality} / åŸºç¤å£²ä¸Š ${yen(g.baseRevenue)}</div>
        </div>`;
        ui.released.appendChild(el);
      });
      ui.relCount.textContent = `${(u.released||[]).length}æœ¬`;
    }

    let unsubUser = null;
    function listenUser(uid){
      if (unsubUser) unsubUser();
      unsubUser = onSnapshot(doc(db, 'users', uid), (snap) => {
        if (snap.exists()) renderUser(snap.data());
      });
    }

    let unsubLB = null;
    function listenLeaderboard(){
      if (unsubLB) unsubLB();
      const qy = query(collection(db, 'leaderboard'), orderBy('money', 'desc'), limit(20));
      unsubLB = onSnapshot(qy, (qs) => {
        ui.leaderboard.innerHTML = '';
        let i = 1;
        qs.forEach(d => {
          const li = document.createElement('li');
          li.innerHTML = `<span class="mr-2 opacity-70">#${i++}</span> <span class="font-semibold">${d.data().name || 'Player'}</span> <span class="float-right mono">${yen(d.data().money||0)}</span>`;
          ui.leaderboard.appendChild(li);
        });
      });
    }

    // ========= Actions =========
    function bindActions(uid){
      $('#act-hire').onclick = () => txUpdate(uid, (u) => {
        if (u.money < COST.hire) return; u.money -= COST.hire; u.employees += 1;
      });
      $('#act-train').onclick = () => txUpdate(uid, (u) => {
        if (u.money < COST.train) return; u.money -= COST.train; u.reputation = Math.min(u.reputation+1, 10);
      });
      $('#act-start-proj').onclick = () => txUpdate(uid, (u) => {
        if (u.money < COST.project) return; u.money -= COST.project;
        u.projects.push({ id: crypto.randomUUID(), name: randomName(), progress: 0, bugs: 0, quality: u.reputation });
      });
      $('#act-sprint').onclick = () => txUpdate(uid, (u) => {
        if (!u.projects.length) return;
        for (const p of u.projects){
          const speed = Math.max(1, Math.floor(u.employees * (0.6 + Math.random()*0.8)));
          p.progress = Math.min(100, p.progress + speed);
          p.bugs = Math.max(0, p.bugs + Math.floor((Math.random()*4) - 1));
        }
      });
      $('#act-release').onclick = () => txUpdate(uid, (u) => {
        const idx = u.projects.findIndex(p => p.progress >= 80);
        if (idx === -1) return;
        const p = u.projects.splice(idx, 1)[0];
        const quality = Math.max(1, Math.min(10, Math.round((p.quality + (100-p.bugs)/20 + u.reputation)/3)));
        const baseRevenue = Math.round(40000 * quality + u.fans * (50 + Math.random()*50));
        u.released.push({ id: p.id, name: p.name, quality, baseRevenue });
        const fansGain = Math.round(quality * (30 + Math.random()*120));
        u.fans += fansGain;
      });
      $('#act-marketing').onclick = () => txUpdate(uid, (u) => {
        if (u.money < COST.marketing) return; u.money -= COST.marketing; u.fans += Math.round(200 + Math.random()*400);
      });
    }

    // ========= Tick (passive income / salaries) =========
    let tickTimer = null; let tickCount = 0;
    function startTick(uid){
      if (tickTimer) clearInterval(tickTimer);
      tickTimer = setInterval(async () => {
        tickCount++; ui.tick.textContent = `tick: ${tickCount}`;
        await txUpdate(uid, (u) => {
          // å£²ä¸Š: å„ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰åŸºç¤å£²ä¸Šã®ä¸€éƒ¨ + ä¹±æ•°
          let income = 0; for (const g of (u.released||[])){
            const decay = 0.98; // å£²ä¸Šã®æ¸›è¡°
            g.baseRevenue = Math.floor(g.baseRevenue * decay);
            income += Math.max(0, Math.floor(g.baseRevenue * 0.2 + Math.random()*3000));
          }
          // çµ¦ä¸ã‚³ã‚¹ãƒˆ: å¾“æ¥­å“¡ * 8000
          const salaries = (u.employees||0) * 8000;
          // ä¼šç¤¾ç¶­æŒè²»
          const upkeep = 3000;
          u.money = u.money + income - salaries - upkeep;
          // ç ´ç”£é˜²æ­¢: ãƒã‚¤ãƒŠã‚¹ã«ãªã£ãŸã‚‰å°‘é¡ã®æ•‘æ¸ˆ
          if (u.money < 0) { u.money = 50000; u.reputation = Math.max(1, u.reputation-1); }
        });
      }, 5000); // 5ç§’ã”ã¨
    }

    function bindAdmin(uid){
      bindActions(uid);
      startTick(uid);
      // Ban
      $('#btn-ban').onclick = async () => {
        if (!ADMINS.includes(uid)) return alert('æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“');
        const tUid = $('#ban-uid').value.trim();
        const reason = $('#ban-reason').value.trim() || 'ãƒãƒ¼ãƒˆãƒ»ä¸æ­£';
        if (!tUid) return alert('UIDã‚’å…¥åŠ›');
        await setDoc(doc(db, 'bannedUsers', tUid), { reason, bannedAt: serverTimestamp() }, { merge: true });
        alert('Banã—ã¾ã—ãŸ');
      };
    }
  </script>
</body>
</html>
